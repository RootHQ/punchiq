{"ast":null,"code":"import { ActivatedRoute, Router } from '@angular/router';\nimport { AuthService } from '../../services/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction SummaryComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nlet SummaryComponent = /*#__PURE__*/(() => {\n  class SummaryComponent {\n    authService;\n    route;\n    router;\n    constructor(authService, route, router) {\n      this.authService = authService;\n      this.route = route;\n      this.router = router;\n    }\n    companyId = '';\n    employeeId = '';\n    employeeName = '';\n    typeBreak = '';\n    pin = '';\n    error = '';\n    companyName = '';\n    ngOnInit() {\n      this.route.paramMap.subscribe(params => {\n        this.companyId = params.get('companyId') || '';\n      });\n      this.route.queryParams.subscribe(query => {\n        console.log('Logout ' + this.authService.isTokenExpired());\n        if (this.authService.isTokenExpired()) {\n          console.log('logout ' + this.authService.isTokenExpired());\n          this.authService.logout();\n          this.router.navigate(['/' + this.companyId + '/login'], {\n            queryParams: {\n              expired: true\n            }\n          });\n        }\n        console.log('Company ID:', this.companyId);\n        console.log('Query Params:', query);\n        console.log('Token:', this.authService.getToken());\n        this.employeeId = localStorage.getItem('employee_id') || '';\n        this.pin = localStorage.getItem('pin') || '';\n        this.companyName = localStorage.getItem('company_name') || '';\n        this.employeeName = localStorage.getItem('employee_name') || '';\n        this.typeBreak = localStorage.getItem('punch_status') || '';\n      });\n    }\n    onPunch() {\n      const punchData = {\n        employee_id: this.employeeId,\n        pin: this.pin,\n        company_id: this.companyId,\n        ip_address: '',\n        local_time: new Date().toISOString()\n      };\n      // Get public IP (you can use an external API)\n      fetch('https://api.ipify.org?format=json').then(response => response.json()).then(data => {\n        punchData.ip_address = data.ip;\n        // Now send the PATCH request (replace with your API endpoint)\n        //this.authService.sendPunch(punchData).subscribe({\n        //  next: (response) => {\n        //    console.log('Punch recorded successfully', response);\n        //    // Handle success, maybe navigate or show a success message\n        // },\n        // error: (err) => {\n        //   console.error('Error sending punch:', err);\n        //   this.error = 'Failed to record punch. Please try again.';\n        //   }\n        // });\n      }).catch(error => {\n        console.error('Error getting IP:', error);\n        this.error = 'Unable to get IP address.';\n      });\n    }\n    onLogout() {\n      console.log('Logout clicked');\n      this.authService.logout();\n      this.router.navigate(['/' + this.companyId + '/login']);\n    }\n    static ɵfac = function SummaryComponent_Factory(t) {\n      return new (t || SummaryComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: SummaryComponent,\n      selectors: [[\"app-punch\"]],\n      decls: 37,\n      vars: 6,\n      consts: [[1, \"header\"], [1, \"logo\"], [1, \"logout\", 3, \"click\"], [1, \"login-container\"], [1, \"login-box\"], [1, \"description\"], [1, \"form\", 3, \"ngSubmit\"], [\"for\", \"companyId\", 1, \"label\"], [\"type\", \"text\", \"id\", \"companyId\", \"name\", \"companyId\", \"disabled\", \"\", 1, \"input_disabled\", 3, \"value\"], [1, \"space-top\"], [\"class\", \"error\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn-login\", \"topSpace\", \"punchOutbtn\"], [1, \"divider\"], [1, \"btn-login\", \"topSpace\", \"Logoutbtn\", 3, \"click\"], [1, \"missed-punch\", 3, \"click\"], [1, \"text_color\", \"textServices\"], [1, \"servicesrootimg\"], [1, \"error\"]],\n      template: function SummaryComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵelement(1, \"div\", 1);\n          i0.ɵɵelementStart(2, \"a\", 2);\n          i0.ɵɵlistener(\"click\", function SummaryComponent_Template_a_click_2_listener() {\n            return ctx.onLogout();\n          });\n          i0.ɵɵtext(3, \"Logout\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"h2\");\n          i0.ɵɵtext(7);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(8, \"h2\");\n          i0.ɵɵtext(9);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"p\", 5);\n          i0.ɵɵtext(11, \"Select your punch choice below.\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(12, \"form\", 6);\n          i0.ɵɵlistener(\"ngSubmit\", function SummaryComponent_Template_form_ngSubmit_12_listener() {\n            return ctx.onPunch();\n          });\n          i0.ɵɵelementStart(13, \"label\", 7);\n          i0.ɵɵtext(14, \"Employee ID\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(15, \"input\", 8);\n          i0.ɵɵelementStart(16, \"label\", 7);\n          i0.ɵɵtext(17, \"Pin\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"input\", 8);\n          i0.ɵɵelementStart(19, \"div\", 9);\n          i0.ɵɵtemplate(20, SummaryComponent_div_20_Template, 2, 1, \"div\", 10);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"button\", 11);\n          i0.ɵɵtext(22, \"Punch Out for the Day\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"div\", 12);\n          i0.ɵɵtext(24, \"OR\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(25, \"button\", 13);\n          i0.ɵɵlistener(\"click\", function SummaryComponent_Template_button_click_25_listener() {\n            return ctx.onLogout();\n          });\n          i0.ɵɵtext(26, \"Logout\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(27, \"br\")(28, \"br\")(29, \"br\")(30, \"br\")(31, \"br\");\n          i0.ɵɵelementStart(32, \"a\", 14);\n          i0.ɵɵlistener(\"click\", function SummaryComponent_Template_a_click_32_listener() {\n            return ctx.onLogout();\n          });\n          i0.ɵɵtext(33, \"Missed Punch\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(34, \"div\", 15);\n          i0.ɵɵelement(35, \"div\", 16);\n          i0.ɵɵtext(36, \" Service by Root\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵtextInterpolate1(\"Hey \", ctx.employeeName, \" PUNCHED_OUT\");\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate2(\"Hey \", ctx.employeeName, \" \", ctx.typeBreak, \" \");\n          i0.ɵɵadvance(6);\n          i0.ɵɵproperty(\"value\", ctx.employeeId);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"value\", ctx.pin);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n        }\n      },\n      dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.NgControlStatusGroup, i4.NgForm],\n      styles: [\".punch-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background-color:#1c1c1c;height:100vh;font-family:Segoe UI,sans-serif}.punch-box[_ngcontent-%COMP%]{background-color:#2b2b2b;padding:40px;border-radius:12px;text-align:center;width:100%;max-width:400px;color:#fff}.description[_ngcontent-%COMP%]{font-size:.9rem;color:#ccc;margin-bottom:20px}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;text-align:left;margin:10px 0 5px;font-weight:700;color:#ddd}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:6px;border:none;margin-bottom:15px;background-color:#3a3a3a;color:#fff}.btn-punch[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#4caf50;border:none;border-radius:6px;font-weight:700;color:#fff;cursor:pointer;font-size:1rem}.separator[_ngcontent-%COMP%]{margin:20px 0;color:#999;font-size:.9rem}.btn-logout[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#888;border:none;border-radius:6px;color:#fff;font-weight:700;cursor:pointer;margin-bottom:10px}.missed-punch[_ngcontent-%COMP%]{display:block;color:#ccc;font-size:.85rem;text-decoration:underline;cursor:pointer}.description[_ngcontent-%COMP%]{font-size:12px;color:#dfdfdf;margin-bottom:20px}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;text-align:left;margin:20px 0 5px;color:#b2b2b2;font-weight:500;font-size:12px}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:95%;padding:10px;border-radius:6px;border:none;margin-bottom:10px;background-color:#323232;color:#fff}.Logoutbtn[_ngcontent-%COMP%]{text-align:center;justify-content:space-between;margin-top:20px;background-color:#7f7f7f;color:#fff}.punchDays[_ngcontent-%COMP%]{text-align:center;justify-content:space-between;margin-top:20px;background-color:#3bb95c;color:#fff}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;color:#fff;height:22vh;justify-content:center}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:\\\"\\\";flex:1;border-bottom:1px solid white;margin:0 1em}.missed-punch[_ngcontent-%COMP%]{color:#b2b2b2;text-align:center;text-decoration:underline;cursor:pointer}.punchOutbtn[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#c83d3d;border:none;border-radius:6px;margin-top:20px;color:#fff;cursor:pointer;font-size:1rem}\"]\n    });\n  }\n  return SummaryComponent;\n})();\nexport { SummaryComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}